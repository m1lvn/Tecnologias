<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Hábitos diarios</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- KPIs del día -->
  <div class="kpi-bar">
    <div class="kpi">
      <div class="kpi-label">Completados</div>
      <div class="kpi-number">{{ doneCount }}</div>
    </div>
    <div class="kpi">
      <div class="kpi-label">Totales</div>
      <div class="kpi-number">{{ total }}</div>
    </div>
    <ion-badge class="today">{{ todayId }}</ion-badge>
  </div>

  <ion-progress-bar [value]="progress"></ion-progress-bar>

  <!-- Agregar hábito -->
  <div class="add-row">
    <ion-input
      placeholder="Nuevo hábito (ej. Beber agua)"
      [(ngModel)]="newHabit"
      [ngModelOptions]="{ standalone: true }">
    </ion-input>
    <ion-button (click)="addHabit()" [disabled]="!newHabit.trim()">
      Agregar
    </ion-button>
  </div>

  <!-- Acciones rápidas del día -->
  <div class="day-actions" *ngIf="total">
    <ion-button fill="solid" (click)="clearDay()">Limpiar día</ion-button>
    <ion-button fill="solid" (click)="markAll()">Marcar todo</ion-button>
  </div>

  <!-- Lista de hábitos -->
  <ion-list>
    <ion-item *ngFor="let h of habitos" lines="inset">
      <ion-label>{{ h.name }}</ion-label>
      <ion-toggle
        [checked]="h.doneToday"
        (ionChange)="toggleHabit(h, $event.detail.checked)">
      </ion-toggle>
      <ion-button fill="clear" class="danger-rose" (click)="removeHabit(h.id)">
        Eliminar
      </ion-button>
    </ion-item>
  </ion-list>

</ion-content>
